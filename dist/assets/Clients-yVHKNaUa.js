import{r as u,c as Q,a as X,b as Y,i as L,u as N,j as n,S as I,l as p,k as ee}from"./index-lGblRe-B.js";import{O as te}from"./index.esm-b4csEhrf.js";import{v as se,R as ne}from"./react-paginate--g0vFINZ.js";import{s as o}from"./profile.module-U9ZOfMhP.js";import{C as O}from"./cancel-foMzmgeL.js";import{a as ae}from"./axios-G2rPRu76.js";import{l as ie}from"./lodash-AbmCXxP2.js";import"./objectWithoutPropertiesLoose-9Q1jwsKS.js";function ge(){const[T,R]=u.useState({left:0,top:0}),[z,_]=u.useState(!0),F=["Client","Location","Status","Transaction Type","Sector","Industry","Deal Type","Deal Size","Committed Investors","Active Funds","Success Rate","Predictor Score","Clear Filters"],[r,x]=u.useState(""),[y,f]=u.useState([]),C=Q(e=>e.user),[S,P]=u.useState(0),[E,v]=u.useState(!1),D=u.useRef(null),[q,H]=u.useState(""),j=X(e=>e.token),[i,g]=u.useState(localStorage.getItem("client-filter")?JSON.parse(localStorage.getItem("client-filter")):{"":[],Client:[],Location:[],Status:[],"Transaction Type":[],Sector:[],Industry:[],"Deal Type":[],"Deal Size":[],"Committed Investors":[],"Active Funds":[],"Success Rate":[],"Predictor Score":[],"Clear Filters":[]});u.useEffect(()=>{j&&(_(!0),ae.get(`http://${Y}:5001/getAllClients`,{headers:{"Content-Type":"application/json",Authorization:j,email:C==null?void 0:C.email}}).then(e=>{if(M(e.data),f(e.data),P(e.data.length),localStorage.getItem("client-filter")){const s=JSON.parse(localStorage.getItem("client-filter"));if(Object.values(s).every(t=>t.length===0)){f(e.data);return}f(c.filter(t=>Object.keys(s).every(l=>{if(s[l].length===0)return!0;switch(l){case"Client":return s[l].some(a=>a===t.name||t.name&&t.name.includes(a));case"Location":return s[l].some(a=>a===t["hq location"]||t["hq location"]&&t["hq location"].includes(a));case"Status":return s[l].some(a=>a===t.status||t.status&&t.status.includes(a));case"Transaction Type":return s[l].some(a=>a===t.transaction_type||t.transaction_type&&t.transaction_type.includes(a));case"Sector":return s[l].some(a=>a===t.sector||t.sector&&t.sector.includes(a));case"Industry":return s[l].some(a=>a===t.industry||t.industry&&t.industry.includes(a));case"Deal Type":return s[l].some(a=>a===t.deal_type||t.deal_type&&a===t.deal_type.toString());case"Deal Size":return s[l].some(a=>a===t.deal_size||t.deal_size&&a===t.deal_size.toString());case"Committed Investors":return s[l].some(a=>a===t[l]||t[l]&&t[l].includes(a));case"Active Funds":return s[l].some(a=>a===t[l]||t[l]&&t[l].includes(a));case"Success Rate":return s[l].some(a=>a===t[l]||t[l]&&t[l].includes(a));case"Predictor Score":return s[l].some(a=>a===t[l]||t[l]&&t[l].includes(a));default:return!0}})))}}).catch(e=>{console.error(e)}).finally(()=>{_(!1)}))},[j]),u.useEffect(()=>{if(Object.values(i).every(e=>e.length===0)){f(c);return}f(c.filter(e=>Object.keys(i).every(s=>{if(i[s].length===0)return!0;switch(s){case"Client":return i[s].some(t=>t===e.name||e.name&&e.name.includes(t));case"Location":return i[s].some(t=>t===e["hq location"]||e["hq location"]&&e["hq location"].includes(t));case"Status":return i[s].some(t=>t===e.status||e.status&&e.status.includes(t));case"Transaction Type":return i[s].some(t=>t===e.transaction_type||e.transaction_type&&e.transaction_type.includes(t));case"Sector":return i[s].some(t=>t===e.sector||e.sector&&e.sector.includes(t));case"Industry":return i[s].some(t=>t===e.industry||e.industry&&e.industry.includes(t));case"Deal Type":return i[s].some(t=>t===e.deal_type||e.deal_type&&t===e.deal_type.toString());case"Deal Size":return i[s].some(t=>t===e.deal_size||e.deal_size&&t===e.deal_size.toString());case"Committed Investors":return i[s].some(t=>t===e[s]||e[s]&&e[s].includes(t));case"Active Funds":return i[s].some(t=>t===e[s]||e[s]&&e[s].includes(t));case"Success Rate":return i[s].some(t=>t===e[s]||e[s]&&e[s].includes(t));case"Predictor Score":return i[s].some(t=>t===e[s]||e[s]&&e[s].includes(t));default:return!0}})))},[i]);const[w,h]=u.useState(0),b=10,W=w+b,k=y.slice(w,W),$=Math.ceil(y.length/b),B=e=>{const s=e.selected*b%y.length;h(s)},U=e=>{H(e.target.value)},J=ie.throttle(U,500),c=L(e=>e.clients),M=L(e=>e.setClients),A=N();function d(e){let s=e.map(a=>a?a.toString():"");return s=s.flatMap(a=>a?a.split(","):[]),s.map(a=>a.trim()).filter((a,Z,G)=>a&&a.trim()!==""&&G.indexOf(a)===Z)}const V=e=>{switch(e){case"Client":return d(c.map(s=>s.name));case"Location":return d(c.map(s=>s["hq location"]));case"Status":return d(c.map(s=>s.status));case"Transaction Type":return d(c.map(s=>s.transaction_type));case"Sector":return d(c.map(s=>s.sector));case"Industry":return d(c.map(s=>s.industry));case"Deal Type":return d(c.map(s=>s.deal_type));case"Deal Size":return d(c.map(s=>s.deal_size));case"Committed Investors":return d(c.map(s=>s["Committed Investors"]));case"Active Funds":return d(c.map(s=>s["Active Funds"]));case"Success Rate":return d(c.map(s=>s["Success Rate"]));case"Predictor Score":return d(c.map(s=>s["Predictor Score"]));default:return[]}},m=e=>{ee(e,g),h(0)},K=e=>{if(e.target.nodeName==="BUTTON"){const s=e.target,t=s.getBoundingClientRect();if(s.textContent==="Clear Filters"){localStorage.removeItem("client-filter"),x(""),v(!1),g({"":[],Client:[],Location:[],Status:[],"Transaction Type":[],Sector:[],Industry:[],"Deal Type":[],"Deal Size":[],"Committed Investors":[],"Active Funds":[],"Success Rate":[],"Predictor Score":[],"Clear Filters":[]});return}R({left:t.left,top:t.top-s.clientHeight})}};return u.useEffect(()=>{function e(s){var l;const t=s.target;if(t.nodeName==="BUTTON"){const a=t;if(F.includes(a.textContent)){if(a.textContent==="Clear Filters"){localStorage.removeItem("filter"),x(""),v(!1);return}x(a.textContent),v(!1);return}}else{if(t.id.startsWith("v-"))return;if((l=t.parentElement)!=null&&l.id.startsWith("v-"))return;if(t.hasAttribute("data-label")&&t.getAttribute("data-label").startsWith("v-"))return;x(""),v(!1)}}return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),n.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"start",gap:"2rem",fontFamily:"'Fira Code', monospace, 'Kalnia', serif"},children:[n.jsxs("div",{style:{marginLeft:"4rem",marginTop:"2rem"},children:[n.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center"},children:[n.jsx("span",{children:"Filters:"}),F.map(e=>n.jsx(n.Fragment,{children:n.jsx("button",{onClick:s=>{x(e),K(s)},style:{backgroundColor:"transparent",border:i[e]&&i[e].length>0?"#fff 0.1rem solid":"#fff4 0.1rem solid"},children:i[e]&&i[e].length>0?i[e].join(", "):e},e)}))]}),r!==""&&n.jsxs("div",{id:"v-layout",style:{position:"absolute",left:T.left,top:T.top,backgroundColor:"#080E1C",border:"2px solid #fffa",borderRadius:"2px",padding:"0.5rem",zIndex:20,width:"26rem",minHeight:"8rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{id:"v-span",style:{fontSize:"1.2rem",alignSelf:"start",marginLeft:"2rem"},children:r}),n.jsxs("div",{id:"v-div",style:{position:"relative",width:"90%"},children:[n.jsxs("div",{style:{display:"flex"},children:[n.jsxs("div",{id:"v-container",className:o["v-container"],style:{display:"flex",flex:9,flexWrap:"wrap",gap:"0.3rem",padding:"0.2rem"},children:[i[r].map(e=>n.jsxs("div",{onClick:s=>{s.stopPropagation(),h(0),g({...i,[r]:i[r].filter(t=>t!==e)})},"data-label":"v-filterItemContainer",className:o["filterItem-container"],children:[n.jsx("div",{"data-label":"v-filterItem",style:{color:"#fff",fontSize:"1.2rem"},children:e}),n.jsx("img",{"data-label":"v-cancelbutton",src:O,className:o["cancel-button"]})]},e)),n.jsx("input",{id:"v-input",ref:D,autoSave:"false",autoComplete:"off","aria-autocomplete":"none",placeholder:"Search",onKeyDown:e=>{var s;e.stopPropagation(),h(0),e.key==="Backspace"&&((s=D.current)==null?void 0:s.value)===""&&g({...i,[r]:i[r].slice(0,i[r].length-1)})},onChange:e=>J(e),onClick:()=>v(!0),className:o["filter-input"],name:"firm",type:"text"})]}),n.jsx("div",{id:"v-cancelpanel",style:{backgroundColor:"#2A2F3E",flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("img",{onClick:()=>{h(0),g({...i,[r]:[]})},"data-label":"v-cancelbutton",src:O,className:o["cancel-button"]})})]}),E&&n.jsx("ul",{onClick:e=>{e.stopPropagation(),h(0),g({...i,[r]:[...i[r],e.target.textContent]})},id:"v-ul",className:o["filter-select"],style:{position:"absolute",textAlign:"left"},children:V(r).filter(e=>e.toUpperCase().startsWith(q.toUpperCase())&&!i[r].includes(e)).map(e=>n.jsx("li",{className:o["filter-option"],children:e},e))})]})]}),n.jsx("div",{style:{width:"100%",backgroundColor:"#fff1",height:"0.05rem",margin:"1rem 0"}}),z?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4rem"},children:Array(30).fill(0).map((e,s)=>n.jsxs("div",{style:{display:"flex",gap:"1rem",lineHeight:1},children:[n.jsx(I,{width:"5.0rem",height:"5rem"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"start",gap:"0.75rem",lineHeight:1},children:[n.jsx(I,{width:"56.0rem",height:"1.4rem"}),n.jsx(I,{width:"27rem",height:"1.2rem"})]})]},s))}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.jsx("span",{style:{textAlign:"left",fontSize:"1.5rem"},children:y.length===S?`${S} Clients`:`${y.length} Clients (out of ${S} Clients)`}),n.jsxs("div",{style:{fontSize:"1.15rem",display:"grid",gap:"2rem",gridTemplateColumns:"2fr repeat(10, 1fr)",width:"100%",textAlign:"left"},children:[n.jsx("span",{children:"Clients"}),n.jsx("span",{children:"Status"}),n.jsx("span",{children:"Transaction Type"}),n.jsx("span",{children:"Industry"}),n.jsx("span",{children:"Sector"}),n.jsx("span",{children:"Deal Type"}),n.jsx("span",{children:"Deal Size"}),n.jsx("span",{children:"Committed Investors"}),n.jsx("span",{children:"Active Funds"}),n.jsx("span",{children:"Success Rate"}),n.jsx("span",{children:"Predictor Score "})]}),n.jsx("div",{style:{width:"100%",backgroundColor:"#fff1",height:"0.05rem"}}),k.length>0?k.map((e,s)=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:o["book-wrapper"],style:{display:"grid",lineHeight:1,gap:"2rem",gridTemplateColumns:"2fr repeat(10, 1fr)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.35rem"}}),n.jsx("div",{style:{position:"relative"},children:n.jsx(te,{onMouseEnter:t=>{t.target.style.cursor="pointer"},onClick:()=>{localStorage.setItem("client-filter",JSON.stringify(i)),localStorage.setItem("client-id",e._id),A(`/client-card/${e._id}`)},src:e.Logo?e.Logo:se,style:{borderRadius:"0.25rem",border:"0.25rem solid transparent",width:"5rem",height:"5rem",objectFit:"contain",background:"rgba(255, 255, 255, 0.5)"}})}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"0.75rem",lineHeight:1,alignItems:"start"},children:[n.jsx("span",{onClick:()=>{localStorage.setItem("client-filter",JSON.stringify(i)),localStorage.setItem("client-id",e._id),A(`/client-card/${e._id}`)},className:o["fund-name"],children:e.name?e.name:"No Name Record"}),n.jsxs("span",{children:["(",e.acronym,")"]}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Location",onClick:m,style:{},children:e["hq location"]?e["hq location"]:"No Location Record"})]})]}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Status",onClick:m,children:p(e.status)||"n/a"}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Transaction Type",onClick:m,children:p(e.transaction_type)||"n/a"}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Industry",onClick:m,children:p(e.industry)||"n/a"}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Sector",onClick:m,children:p(e.sector)||"n/a"}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Deal Type",onClick:m,children:p(e.deal_type)||"n/a"}),n.jsx("span",{className:o["fund-list-item"],"data-label":"Deal Size",onClick:m,children:p(e.deal_size)||"n/a"}),n.jsx("span",{style:{textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"},children:p(e["Committed Investors"])||"n/a"}),n.jsx("span",{style:{textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"},children:p(e["Active Funds"])||"n/a"}),n.jsx("span",{style:{textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"},children:p(e["Success Rate"])||"n/a"}),n.jsx("span",{style:{textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"},children:p(e["Predictor Score"])||"n/a"})]},e._id),n.jsx("div",{style:{width:"100%",backgroundColor:"#fff1",height:"0.05rem"}})]})):n.jsx("p",{children:"No data"})]},"fund-cards")]}),k.length>0&&n.jsx(ne,{className:o["fund-card-pagination"],pageLinkClassName:o["fund-card-pagination-link"],pageClassName:o["fund-card-pagination-li"],activeClassName:o["fund-card-pagination-li-active"],activeLinkClassName:o["fund-card-pagination-link-active"],nextClassName:o["fund-card-pagination-next"],previousClassName:o["fund-card-pagination-pre"],breakLabel:"...",nextLabel:"next >",onPageChange:B,pageRangeDisplayed:5,pageCount:$,previousLabel:"< pre",renderOnZeroPageCount:null})]})}export{ge as default};
