import{r as o,u as pe,a as oe,j as e,S as he,b as ae,W as ue}from"./index-Us0FpZC3.js";import{s as r}from"./home.module-DW53Skpb.js";import{a as N}from"./axios-G2rPRu76.js";import{O as fe}from"./index.esm-ZxMmBJH0.js";import{C as ge}from"./cancel-foMzmgeL.js";import"./objectWithoutPropertiesLoose-9Q1jwsKS.js";function xe({user:c}){const[k,g]=o.useState(!0),[F,V]=o.useState("all"),[O,te]=o.useState([]),[Y,I]=o.useState(!1),[G,W]=o.useState(!1),[T,B]=o.useState({x:0,y:0}),[x,S]=o.useState(null),[b,L]=o.useState(null),[p,J]=o.useState(""),[D,X]=o.useState(1),[f,A]=o.useState([]),[d,$]=o.useState([]);o.useRef(null),o.useState(!1),o.useRef(null),o.useState(0);const P=pe(),M=oe(t=>t.token);o.useEffect(()=>{(async()=>{const n=await N.get("http://localhost:5001/fundrisingpipeline",{headers:{"Content-Type":"application/json",Authorization:M,email:c==null?void 0:c.email}});n.status===200&&(g(!1),A(n.data))})()},[]),o.useEffect(()=>{(async()=>{const n=await N.get(`http://localhost:5001/fundrisingpipeline?page=${D}`,{headers:{"Content-Type":"application/json",Authorization:M,email:c==null?void 0:c.email}});n.status===200&&(g(!1),te(i=>[...i,...n.data]))})()},[D]);const Q=()=>{X(D+1)},w=t=>{W(!1),b&&(clearTimeout(b),L(null)),x&&(clearTimeout(x),S(null));const n=t.currentTarget.innerText,i=t.currentTarget.getBoundingClientRect(),a=t.currentTarget.offsetWidth,s=t.currentTarget.offsetHeight,l=setTimeout(()=>{B({x:i.left+a/2-120,y:i.top+s/2-240}),I(!0),J(n)},500);S(l)},R=t=>{I(!1),b&&(clearTimeout(b),L(null)),x&&(clearTimeout(x),S(null));const n=t.currentTarget.innerText,i=t.currentTarget.getBoundingClientRect(),a=t.currentTarget.offsetWidth,s=t.currentTarget.offsetHeight,l=setTimeout(()=>{B({x:i.left+a/2-120,y:i.top+s/2-90}),W(!0),J(n)},500);S(l)},y=()=>{x&&(clearTimeout(x),S(null)),b&&(clearTimeout(b),L(null))},q=t=>{const n=new Date(t),i=new Date,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["01","02","03","04","05","06","07","08","09","10","11","12"],l=n.getDate(),h=a[n.getDay()],j=s[n.getMonth()],u=n.getFullYear(),_=("0"+n.getHours()).slice(-2),m=("0"+n.getMinutes()).slice(-2);return i.getFullYear()===u?i.getDate()===l&&i.getMonth()===n.getMonth()?`Today ${_}:${m}`:i.getDate()-1===l&&i.getMonth()===n.getMonth()?`Yesterday ${_}:${m}`:i.getDate()-l<=7&&i.getMonth()===n.getMonth()?`${h} ${_}:${m}`:`${l}/${j} ${_}:${m}`:`${l}/${j}/${u.toString().slice(-2)} ${_}:${m}`},U=t=>{if(F==="all")return!0;if(F==="you"){const n=t.account_holder.toUpperCase();return[c==null?void 0:c.name,c==null?void 0:c.username,c==null?void 0:c.email].map(s=>(s==null?void 0:s.toUpperCase())||"").some(s=>n.includes(s)||s.includes(n))}},se=t=>{const n=new Date,i=new Date(t),a=Math.abs(n.getTime()-i.getTime()),s=Math.ceil(a/(1e3*60*60*24));if(s<=1)return"today";if(s<=7)return"this week";if(s<=14)return"two weeks ago";if(s<=30)return"last month";if(s<=365){const l=Math.floor(s/30);return`${l} month${l>1?"s":""} ago`}else{const l=Math.floor(s/365);return`${l} year${l>1?"s":""} ago`}};o.useEffect(()=>{(async()=>{g(!0);try{const n=await N.get("http://localhost:5001/getNodesProfileImage",{headers:{"Content-Type":"application/json",Authorization:M,email:c==null?void 0:c.email}});n.status===200&&(g(!1),$(n.data))}catch(n){g(!1),console.error(n)}})()},[]);const K=t=>{if(t){const n=d.find(i=>i.name.includes(t));return n?n.profile_image:""}return""},E=t=>{if(t){const n=d.find(i=>i.name.includes(t));return n?n.name:""}return""};return e.jsxs("div",{style:{width:"100%",padding:"1rem"},children:[e.jsxs("div",{className:r["live-update-button-layout"],children:[e.jsx("button",{className:F==="all"?r["live-update-option-button-highlighted"]:r["live-update-option-button"],onClick:()=>{V("all"),g(!1)},children:"All"}),e.jsx("button",{className:F==="you"?r["live-update-option-button-highlighted"]:r["live-update-option-button"],onClick:()=>{V("you"),g(!1)},children:"You"})]}),k?e.jsx("div",{children:e.jsx("ul",{className:r["new-ul-skeleton"],children:Array.from({length:3}).map((t,n)=>e.jsx("li",{children:e.jsx(he,{duration:2})},n))})}):e.jsxs("ul",{className:r["news-ul"],children:[O.filter(t=>U(t)).map(t=>e.jsx(e.Fragment,{children:e.jsxs("li",{style:{display:"flex",alignItems:"center"},children:[e.jsx(fe,{onClick:()=>P(`/user-profile/${E(t.account_holder).split(" ").join("-")}`),src:K(t.account_holder),style:{width:"3rem",cursor:"pointer",height:"3rem",borderRadius:"50%",marginRight:"1rem"}}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("span",{onClick:()=>P(`/user-profile/${E(t.account_holder).split(" ").join("-")}`),style:{fontSize:"1rem",color:"#aaa"},children:t.account_holder}),e.jsx("span",{style:{fontSize:"1rem",color:"#aaa"},children:q(t.last_updated_status_date)})]}),e.jsxs("div",{style:{padding:"0.5rem 1rem",borderRadius:"0.75rem",backgroundColor:"#9993"},children:[t.contacted===1&&t.pass_contacted===0&&t.deck_request===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{onMouseEnter:R,onMouseLeave:y,className:r.account_holder,children:t.account_holder}),e.jsx("span",{children:" contacted "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" at "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" for "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name})]}),t.contacted===1&&t.pass_contacted===1&&t.deck_request===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" passed on "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" after initial pitch"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===0&&t.pass_meeting===0&&t.dd===0&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" requested the "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" deck"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" passed on "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" after reviewing the deck"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===1&&t.pass_meeting===0&&t.dd===0&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" requested a "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" meeting - "}),e.jsx("span",{onMouseEnter:R,onMouseLeave:y,className:r.account_holder,children:t.account_holder})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===1&&t.pass_meeting===1&&t.dd===0&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" passed on "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" after a meeting"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===1&&t.pass_meeting===0&&t.dd===1&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" entered in dd phase on "}),e.jsx("span",{onMouseEnter:w,onMouseLeave:y,className:r["company-manager"],children:t.company_name})]})]})]})]},t.id)})),e.jsx("li",{style:{alignSelf:"center"},children:e.jsx("button",{onClick:Q,children:"Load more..."})}),G&&e.jsxs("div",{onMouseLeave:()=>{x&&(clearTimeout(x),S(null));const t=setTimeout(()=>{W(!1)},200);L(t)},style:{backdropFilter:"blur(25px)",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.5s ease",zIndex:10,position:"absolute",gap:"1rem",top:T.y,left:T.x,width:"25rem",height:"15rem",background:"#fff1",borderRadius:"0.5rem"},children:[e.jsx("div",{style:{color:"#fff",marginLeft:"5%",width:"90%",display:"flex",gap:"2rem",marginTop:"2rem",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:"#fff",fontSize:"1.3rem",fontWeight:500,whiteSpace:"wrap"},children:p})}),e.jsx("div",{style:{width:"90%",height:"0.5px",backgroundColor:"#eee"}}),e.jsxs("div",{style:{justifyItems:"start",alignItems:"center",width:"90%",marginLeft:"5%",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"Contacted"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.contacted),0)}),e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"Deck Requests"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.deck_request),0)}),e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"Meeting Requests"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.meeting_request),0)}),e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"DD"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.dd),0)})]})]}),Y&&e.jsxs("div",{onMouseLeave:()=>{x&&(clearTimeout(x),S(null));const t=setTimeout(()=>{I(!1)},200);L(t)},style:{backdropFilter:"blur(25px)",display:"flex",flexDirection:"column",alignItems:"center",transition:"all 0.5s ease",zIndex:10,position:"absolute",gap:"1rem",top:T.y,left:T.x,width:"25rem",height:"30rem",background:"#fff1",borderRadius:"0.5rem"},children:[e.jsx("div",{style:{color:"#fff",marginLeft:"5%",width:"90%",display:"flex",gap:"2rem",marginTop:"2rem",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:"#fff",fontSize:"1.3rem",fontWeight:500,whiteSpace:"wrap"},children:p})}),e.jsx("div",{style:{width:"90%",height:"0.5px",backgroundColor:"#eee"}}),e.jsxs("div",{style:{justifyItems:"start",alignItems:"center",width:"90%",marginLeft:"5%",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"Contacted"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.contacted),0)}),e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"Deck Requests"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.deck_request),0)}),e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"Meeting Requests"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.meeting_request),0)}),e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:500,whiteSpace:"wrap"},children:"DD"}),e.jsx("span",{style:{color:"#754DCA",fontSize:"1.5rem",fontWeight:500,whiteSpace:"wrap"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).reduce((t,n)=>t+(n==null?void 0:n.dd),0)})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"90%",height:"0.5px",backgroundColor:"#eee"}}),e.jsx("ul",{className:r["contact-list-scroll"],style:{textAlign:"left",padding:"0 3% 3% 0",width:"80%",maxHeight:"40%",overflow:"auto",color:"#111"},children:f.filter(t=>(t==null?void 0:t.company_name)===p).map(t=>e.jsxs("li",{style:{padding:"0.5rem",color:"#eee",fontSize:"1rem"},children:[e.jsx("span",{style:{color:"violet"},children:se(t.last_updated_status_date)})," - ",t.contacted===1&&t.pass_contacted===0&&t.deck_request===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:r.account_holder,children:t.account_holder}),e.jsx("span",{children:" contacted "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" at "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" for "}),e.jsx("span",{className:r["company-manager"],children:t.company_name})]}),t.contacted===1&&t.pass_contacted===1&&t.deck_request===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" passed on "}),e.jsx("span",{className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" after initial pitch"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===0&&t.pass_meeting===0&&t.dd===0&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" requested the "}),e.jsx("span",{className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" deck"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" passed on "}),e.jsx("span",{className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" after reviewing the deck"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===1&&t.pass_meeting===0&&t.dd===0&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" requested a "}),e.jsx("span",{className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" meeting - "}),e.jsx("span",{className:r.account_holder,children:t.account_holder})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===1&&t.pass_meeting===1&&t.dd===0&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_contact_pitched?t.LP_contact_pitched:"Someone"}),e.jsx("span",{children:" from "}),e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" passed on "}),e.jsx("span",{className:r["company-manager"],children:t.company_name}),e.jsx("span",{children:" after a meeting"})]}),t.contacted===1&&t.pass_contacted===0&&t.deck_request===1&&t.pass_deck===0&&t.meeting_request===1&&t.pass_meeting===0&&t.dd===1&&t.pass_dd===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#fff"},children:t.LP_pitched}),e.jsx("span",{children:" entered in dd phase on "}),e.jsx("span",{className:r["company-manager"],children:t.company_name})]})]},t.id))})]})]})]})]})}const ye=o.memo(xe),me=ye;function ke(){ae(a=>a.setUser);const c=ae(a=>a.user),k=oe(a=>a.token),[g,F]=o.useState(""),[V,O]=o.useState([]),[te,Y]=o.useState([]),[I,G]=o.useState([]),[W,T]=o.useState([]),[B,x]=o.useState([]),[S,b]=o.useState({}),{sendMessage:L,lastMessage:p,readyState:J}=o.useContext(ue),[D,X]=o.useState([]),[f,A]=o.useState([]),[d,$]=o.useState("Pinned"),[P,M]=o.useState(null),[Q,w]=o.useState(""),R=o.useRef(null),[y,q]=o.useState([]);o.useEffect(()=>{P!==null&&w(d!==P?"tab-enter":"tab-exit"),M(d)},[d,P]),o.useEffect(()=>{const a=R.current,s=()=>{w("")};return a.addEventListener("animationend",s),()=>{a.removeEventListener("animationend",s)}},[]);const[U,se]=o.useState([{message:"Tyler Aroner should catch up with Schenkein at GV for ANTION after contacted on 08-10-2021"},{message:"Tyler Aroner should catch up with Philippakisa at GV for REGEN after contacted on 27-01-2022"},{message:"Tyler Aroner should catch up with Philippakisa at GV for STA after contacted on 27-01-2022"},{message:"Tyler Aroner should catch up with Sullivan at GV for STA after contacted on 03-02-2022"},{message:"Tyler Aroner should catch up with Robbins at GV for STA after contacted on 03-02-2022"}]);o.useEffect(()=>{M(d)},[d]),o.useEffect(()=>{N.get("http://localhost:5001/getAllGPTPrompt",{headers:{"Content-Type":"application/json",Authorization:k,email:c==null?void 0:c.email}}).then(a=>a.data).then(a=>{X(a)}).catch(a=>{console.error("Error:",a)})},[]),o.useEffect(()=>{const a=async()=>{const s=await N.get(`http://localhost:5001?q=${g}`,{headers:{"Content-Type":"application/json",Authorization:k,email:c==null?void 0:c.email}});O(s.data),Y(s.data);const l=Array.from(new Set(s.data.map(u=>u.sender)));G(l);const h=Array.from(new Set(s.data.map(u=>u.isInvestorEmail.toString())));T(h);const j=Array.from(new Set(s.data.map(u=>u.project)));x(j)};(g.length===0||g.length>2)&&a()},[g]),o.useEffect(()=>{k&&(async()=>{const s=await N.get("http://localhost:5001/getUser",{headers:{"Content-Type":"application/json",Authorization:k,email:c==null?void 0:c.email},params:{email:c==null?void 0:c.email}});s.status===200&&b(s.data)})()},[k]);const K=a=>{const s=new Date(a),l=s.getFullYear(),h=s.getMonth()+1,j=s.getDate(),u=s.getHours().toString().padStart(2,"0"),_=s.getMinutes().toString().padStart(2,"0"),m=s.getSeconds().toString().padStart(2,"0");return`${j}/${h}/${l} ${u}:${_}:${m}`};o.useEffect(()=>{if(p){const a=JSON.parse(p.data),s=new Date(a.time),l=s.getFullYear(),h=s.getMonth()+1,j=s.getDate(),u=s.getHours().toString().padStart(2,"0"),_=s.getMinutes().toString().padStart(2,"0"),m=s.getSeconds().toString().padStart(2,"0"),H=`${j}/${h}/${l} ${u}:${_}:${m}`;if(a.formatTime=H,a.type==="approval request")if(localStorage.getItem("approvalRequests")){const v=JSON.parse(localStorage.getItem("approvalRequests"));q([...v])}else localStorage.setItem("approvalRequests",JSON.stringify([a])),q(v=>[...v,a]);else a.type==="approval response"&&(console.log("Approval response"),localStorage.getItem("approvalRequests")?q(v=>v.filter(z=>z.requestId!==a.requestId)):q(v=>v.filter(z=>z.requestId!==a.requestId)))}},[p]);const E=a=>a.type?f.some(s=>s.content===a.content):f.some(s=>s.message===a.message),t=(a,s)=>{a.stopPropagation(),E(s)?s.type?A(l=>l.filter(h=>h.content!==s.content)):A(l=>l.filter(h=>h.message!==s.message)):A(l=>[...l,s])},n=({children:a,tooltip:s})=>{const[l,h]=o.useState(!1),[j,u]=o.useState({x:0,y:0}),[_,m]=o.useState(!1),[H,v]=o.useState(!1),[z,ne]=o.useState(!1),re=()=>{ne(!0)},Z=()=>{ne(!1)},ce=C=>{C.preventDefault(),h(!0),u({x:C.clientX,y:C.clientY}),v(!0)},ee=()=>{h(!1),v(!1)},le=()=>{m(!0)},ie=()=>{m(!1)};o.useEffect(()=>(document.addEventListener("click",ee),()=>{document.removeEventListener("click",ee)}),[]);const de=async C=>{C.preventDefault(),Z()};return e.jsxs("div",{style:{backgroundColor:H?"#7774":"transparent"},onContextMenu:ce,onClick:ee,onMouseEnter:le,onMouseLeave:ie,children:[a,s.type&&!H&&s&&e.jsxs(i,{show:_,children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:700},children:"Sender:"})," ",s.sender_name]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:700},children:"Email:"})," ",s.sender_email]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:700},children:"Content:"})," ",s.content]})]}),l&&e.jsx("div",{style:{position:"absolute",top:`${j.y}px`,left:`${j.x}px`,backgroundColor:"white",boxShadow:"0px 0px 2px 0px rgba(255, 255, 255, 0.90)",borderRadius:"0.5rem",zIndex:1e3},children:e.jsxs("ul",{style:{color:"#333",listStyleType:"none",margin:0,padding:0},children:[e.jsx("li",{style:{padding:"0.5rem 1rem",margin:0},onClick:C=>t(C,s),children:E(s)?"Unpin this":"Pin this"}),!s.type&&e.jsx("li",{onClick:re,style:{padding:"0.5rem 1rem",margin:0},children:"Follow up"})]})}),z&&e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"1rem",display:"flex",flexDirection:"column",alignItems:"start",borderRadius:"0.5rem",boxShadow:"0px 0px 2px 0px rgba(0, 0, 0, 0.1)",width:"25rem",height:"20rem",zIndex:1e3},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90%"},children:[e.jsx("h2",{style:{color:"#000"},children:"Status Update"}),e.jsx("img",{onClick:Z,src:ge,style:{width:"0.8rem",height:"0.8rem",cursor:"pointer"},alt:""})]}),e.jsxs("form",{style:{display:"grid",width:"80%",gap:"1rem",padding:"1rem",color:"#000",gridTemplateColumns:"1fr 1fr"},onSubmit:de,children:[e.jsx("label",{htmlFor:"accountManager",style:{color:"#000"},children:"Account Manager"}),e.jsx("span",{children:"Tyler"}),e.jsx("label",{htmlFor:"client",style:{color:"#000"},children:"Client"}),e.jsx("span",{children:"Avivo"}),e.jsx("label",{htmlFor:"vc",children:"VC"}),e.jsx("span",{children:"VC"}),e.jsx("label",{htmlFor:"contact",style:{color:"#000"},children:"Contact"}),e.jsx("span",{children:"Sullivan"}),e.jsx("label",{htmlFor:"status",style:{color:"#000"},children:"Status"}),e.jsxs("select",{name:"status",id:"status",children:[e.jsx("option",{value:"",children:"Select a Status"}),e.jsx("option",{value:"manager1",children:"Status 1"}),e.jsx("option",{value:"manager2",children:"Status 2"}),e.jsx("option",{value:"manager3",children:"Status 3"})]}),e.jsx("button",{type:"submit",children:"Confirm"}),e.jsx("button",{type:"button",onClick:Z,children:"Cancel"})]})]})]})},i=({show:a,children:s})=>a?e.jsx("div",{style:{position:"absolute",backdropFilter:"blur(10px)",backgroundColor:"#fff9",color:"#333",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0px 0px 2px 0px rgba(0, 0, 0, 0.1)",zIndex:1e3,width:"25rem",right:"40rem",bottom:"20rem"},children:s}):null;return e.jsxs("div",{style:{overflowX:"hidden",display:"flex",flexDirection:"column",alignItems:"start",marginLeft:"10.25rem"},children:[e.jsx("h2",{className:r["news-title"],children:`${S.name} Dashboard`}),e.jsxs("div",{style:{paddingLeft:"0.5%",width:"97.5%",textAlign:"left",display:"grid",gridTemplateColumns:"3fr 1fr",height:"80vh"},children:[e.jsxs("div",{style:{gridRow:"1",gridColumn:"1",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",position:"absolute",top:0,right:"40px",color:"#DDD",gap:"0.5rem"},children:[e.jsx("span",{onClick:()=>$("Pinned"),style:{color:d==="Pinned"?"#FFF":"#DDD",cursor:"pointer",fontWeight:d==="Pinned"?700:400},children:"Pinned"}),e.jsx("span",{children:"|"}),e.jsx("span",{onClick:()=>$("Milestone"),style:{color:d==="Milestone"?"#FFF":"#DDD",cursor:"pointer",fontWeight:d==="Milestone"?700:400},children:"Milestone"}),e.jsx("span",{children:"|"}),e.jsx("span",{onClick:()=>$("Approval Request"),style:{color:d==="Approval Request"?"#FFF":"#DDD",cursor:"pointer",fontWeight:d==="Approval Request"?700:400},children:"Approval Request"})]}),e.jsxs("div",{ref:R,className:`${r["tab-content"]} ${r[Q]}`,style:{height:"35vh",width:"97.5%",backgroundColor:"#aaa1",boxShadow:"0px 0px 2px 0px rgba(255, 255, 255, 0.90)",borderRadius:"1rem"},children:[e.jsx("h2",{style:{marginTop:"2.5rem"},className:r["news-title"],children:d}),e.jsx("div",{className:r["animation-container"],children:e.jsxs("ul",{style:{maxHeight:"75%",overflow:"auto"},className:r["news-ul"],children:[d==="Milestone"&&e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Congratulations, ",e.jsx("span",{children:"Eliott Harfouche"}),". You've hited 3 deck requests this week."]}),e.jsx("li",{children:"Avivo has recieved 16 meetings request this month!"}),e.jsx("li",{children:"Eliott Harfouche has 3 requests pending, please check your requests"})]}),d==="Pinned"&&f.map((a,s)=>e.jsx(n,{tooltip:a,children:e.jsx("li",{children:a.message})},s)),d==="Approval Request"&&e.jsx(e.Fragment,{children:y.length>0&&y.map((a,s)=>e.jsxs("li",{children:[a.sendEmail," sent you a request to ",a.contactPerson," at ",a.fundName," - ",K(a.time)]},a.time))})]})})]})]}),e.jsx("div",{style:{gridRow:"1",gridColumn:"2"},children:e.jsxs("div",{style:{height:"35vh",width:"97.5%",backgroundColor:"#aaa1",boxShadow:"0px 0px 2px 0px rgba(255, 255, 255, 0.90)",borderRadius:"1rem"},children:[e.jsx("h2",{style:{marginTop:"2.5rem"},className:r["news-title"],children:"Follow Ups"}),e.jsx("ul",{style:{maxHeight:"80%",overflow:"auto"},className:r["news-ul"],children:U.length>0&&U.map((a,s)=>e.jsx(n,{tooltip:a,children:e.jsx("li",{children:a.message})},s))})]})}),e.jsx("div",{style:{gridRow:"2",gridColumn:"2",height:"50%"},children:e.jsxs("div",{style:{height:"35vh",width:"97.5%",backgroundColor:"#aaa1",boxShadow:"0px 0px 2px 0px rgba(255, 255, 255, 0.90)",borderRadius:"1rem"},children:[e.jsx("h2",{style:{marginTop:"2rem"},className:r["news-title"],children:"GPT prompt"}),e.jsx("ul",{style:{maxHeight:"80%",overflow:"auto"},className:r["news-ul"],children:D.length>0&&D.map((a,s)=>e.jsx(n,{tooltip:a,children:e.jsx("li",{children:a.message})},s))})]})}),e.jsxs("div",{style:{height:"35vh",gridRow:"2",gridColumn:"1",backgroundColor:"#aaa1",boxShadow:"0px 0px 2px 0px rgba(255, 255, 255, 0.90)",borderRadius:"1rem",marginTop:"2rem",width:"97.5%"},children:[e.jsxs("div",{className:r["live-update-layout"],children:[e.jsx("h2",{style:{margin:"auto 0"},className:r["news-title"],children:"Live update"}),e.jsx("div",{className:r["live-update-icon"]})]}),e.jsx(me,{user:S})]})]})]})}export{ke as default};
